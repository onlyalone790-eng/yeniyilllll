<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yeni YÄ±l!ğŸ„</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="sync-notification" id="syncNotification">ğŸ”„ Veriler senkronize ediliyor...</div>

    <!-- ============================================ -->
    <!-- Ä°LK GÄ°RÄ°Å MESAJI -->
    <!-- ============================================ -->
    <div class="welcome-overlay" id="welcomeOverlay">
        <div class="welcome-message">
            <div class="welcome-content">
                <h2>ğŸ„âœ¨</h2>
                <p>Sitemizi biraz daha gÃ¼zelleÅŸtirmek istedim umarÄ±m beÄŸenirsinn</p>
                <button class="welcome-btn" onclick="closeWelcome()">Devam Et ğŸ’</button>
            </div>
        </div>
    </div>

    <script>
        // Ä°lk giriÅŸ mesajÄ± kontrolÃ¼
        function closeWelcome() {
            const overlay = document.getElementById('welcomeOverlay');
            if (overlay) {
                overlay.classList.add('hidden');
                localStorage.setItem('welcomeShown', 'true');
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 500);
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde kontrol et
        window.addEventListener('load', function() {
            const welcomeShown = localStorage.getItem('welcomeShown');
            const overlay = document.getElementById('welcomeOverlay');
            
            if (welcomeShown === 'true' && overlay) {
                overlay.style.display = 'none';
            }
        });
    </script>
    <!-- Ä°LK GÄ°RÄ°Å MESAJI SONU -->

    <div class="character-selection" id="characterSelection">
        <h1>ğŸ„YÄ±lbaÅŸÄ± AÄŸacÄ±mÄ±za HoÅŸ Geldin!ğŸ„</h1>
        <p>Kim olarak sÃ¼slemek istersinn?</p>
        <div class="character-buttons">
            <button class="character-btn kangal-choice" onclick="selectCharacter('kangal')">
                <div>ğŸ•</div>
                <div>Kangal</div>
            </button>
            <button class="character-btn tavsan-choice" onclick="selectCharacter('tavsan')">
                <div>ğŸ°</div>
                <div>TavÅŸan</div>
            </button>
        </div>
    </div>

    <div class="container" id="mainContent" style="display: none;">
        <div class="header">
            <h1>ğŸ„YÄ±lbaÅŸÄ± AÄŸacÄ±mÄ±zğŸ„</h1>
            <div class="sus-counter">
                ğŸ SÃ¼s SayÄ±sÄ±: <span id="ornamentCount">0</span>
            </div>
        </div>

        <div id="warning" class="warning" style="display: none;">
            âš ï¸ Dikkat! SÃ¼re dolmadan aÄŸacÄ± sÃ¼slemelisiniz yoksa tÃ¼m sÃ¼sler kaybolacak!
        </div>

        <div class="tree-wrapper">
            <div class="tree-container">
                <div class="star">â­</div>
                <div class="tree">
                    <div class="tree-layer bottom"></div>
                    <div class="tree-layer middle"></div>
                    <div class="tree-layer top"></div>
                </div>
                <div class="trunk"></div>
                <div id="ornaments"></div>
            </div>
        </div>

        <div class="buttons-container">
            <button class="player-button kangal" id="kangalBtn">
                <div>ğŸ• Kangal</div>
                <div class="timer" id="kangalTimer">HazÄ±r!</div>
            </button>
            <button class="player-button tavsan" id="tavsanBtn">
                <div>ğŸ° TavÅŸan</div>
                <div class="timer" id="tavsanTimer">HazÄ±r!</div>
            </button>
        </div>

        <div class="messages-container">
            <h2>ğŸ… YÄ±lbaÅŸÄ± MesajlarÄ± ğŸ…</h2>
            <p style="text-align: center; margin-bottom: 20px;">
                MesajlarÄ±nÄ±z 1 Ocak 00:00'da aÃ§Ä±lacak! ğŸ‰
            </p>

            <div class="message-input-group">
                <label for="kangalMessage">ğŸ• Kangal'Ä±n MesajÄ±:</label>
                <textarea id="kangalMessage" placeholder="YÄ±lbaÅŸÄ± mesajÄ±nÄ± buraya yaz..." style="display: none;"></textarea>
                <div id="kangalSaved" class="message-saved" style="display: none;">
                    âœ… MesajÄ±n kaydedildi! 1 Ocak'ta aÃ§Ä±lacak ğŸ
                </div>
                <button class="save-message-btn" id="kangalSaveBtn" onclick="saveMessage('kangal')">MesajÄ± Yaz & Kaydet</button>
            </div>

            <div class="message-input-group">
                <label for="tavsanMessage">ğŸ° TavÅŸan'Ä±n MesajÄ±:</label>
                <textarea id="tavsanMessage" placeholder="YÄ±lbaÅŸÄ± mesajÄ±nÄ± buraya yaz..." style="display: none;"></textarea>
                <div id="tavsanSaved" class="message-saved" style="display: none;">
                    âœ… MesajÄ±n kaydedildi! 1 Ocak'ta aÃ§Ä±lacak ğŸ
                </div>
                <button class="save-message-btn" id="tavsanSaveBtn" onclick="saveMessage('tavsan')">MesajÄ± Yaz & Kaydet</button>
            </div>

            <div class="countdown" id="countdown"></div>
        </div>

        <div class="messages-container" id="messagesLockedContainer" style="display: block; margin-top: 30px;">
            <div class="messages-display" style="display: block;">
                <div class="message-locked">ğŸ”’</div>
                <h3 style="text-align: center; font-size: 1.3em;">Mesajlar 1 Ocak 00:00'da aÃ§Ä±lacak!</h3>
            </div>
        </div>

        <div class="messages-container" id="messagesDisplayContainer" style="display: none; margin-top: 30px;">
            <div class="messages-display" style="display: block;">
                <h2 style="text-align: center; margin-bottom: 20px;">ğŸŠ Mutlu YÄ±llar! ğŸŠ</h2>
                <div class="message-card">
                    <h3>ğŸ• Kangal'dan:</h3>
                    <p id="displayKangalMessage"></p>
                </div>
                <div class="message-card">
                    <h3>ğŸ° TavÅŸan'dan:</h3>
                    <p id="displayTavsanMessage"></p>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- ============================================ -->
    <!-- KAR YAÄIÅI EFEKTÄ° -->
    <!-- ============================================ -->
    <div id="snowContainer"></div>
    
    <style>
        #snowContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }
        
        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1em;
            user-select: none;
            pointer-events: none;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }
    </style>
    
    <script>
        // Kar yaÄŸÄ±ÅŸÄ± sistemi
        function createSnowflake() {
            const snowContainer = document.getElementById('snowContainer');
            if (!snowContainer) return;
            
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.textContent = 'â„';
            
            // Rastgele pozisyon
            snowflake.style.left = Math.random() * 100 + '%';
            
            // Rastgele boyut
            const size = Math.random() * 0.5 + 0.5; // 0.5em - 1em arasÄ±
            snowflake.style.fontSize = size + 'em';
            
            // Rastgele animasyon sÃ¼resi (yavaÅŸ-hÄ±zlÄ±)
            const duration = Math.random() * 10 + 10; // 10-20 saniye arasÄ±
            snowflake.style.animationDuration = duration + 's';
            
            // Rastgele opaklÄ±k
            snowflake.style.opacity = Math.random() * 0.6 + 0.4;
            
            snowContainer.appendChild(snowflake);
            
            // Animasyon bitince kar tanesini sil
            setTimeout(() => {
                snowflake.remove();
            }, duration * 1000);
        }
        
        // Her 200ms'de bir kar tanesi oluÅŸtur
        setInterval(createSnowflake, 200);
        
        // BaÅŸlangÄ±Ã§ta birkaÃ§ kar tanesi oluÅŸtur
        for (let i = 0; i < 30; i++) {
            setTimeout(createSnowflake, i * 100);
        }
    </script>
    <!-- KAR YAÄIÅI EFEKTÄ° SONU -->

    <!-- ============================================ -->
    <!-- MÃœZÄ°K SÄ°STEMÄ° - Agresif otomatik Ã§alma -->
    <!-- ============================================ -->
    
    <!-- Ses dosyasÄ± - src kÄ±smÄ±na kendi ÅŸarkÄ±nÄ±n yolunu yaz -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="christmas-440431.mp3" type="audio/mpeg">
        <source src="christmas-440431.ogg" type="audio/ogg">
    </audio>

    <script>
        // MÃ¼zik deÄŸiÅŸkenleri
        const bgMusic = document.getElementById('backgroundMusic');
        let musicStarted = false;

        // MÃ¼ziÄŸi baÅŸlatma fonksiyonu
        function attemptPlayMusic() {
            if (!musicStarted) {
                bgMusic.play().then(() => {
                    console.log('ğŸµ MÃ¼zik baÅŸladÄ±!');
                    musicStarted = true;
                }).catch((error) => {
                    console.log('MÃ¼zik henÃ¼z Ã§alÄ±namadÄ±, tekrar denenecek...');
                });
            }
        }

        // Sayfa yÃ¼klendiÄŸinde hemen dene
        attemptPlayMusic();

        // DOMContentLoaded'da dene
        document.addEventListener('DOMContentLoaded', attemptPlayMusic);

        // Sayfa tamamen yÃ¼klendiÄŸinde dene
        window.addEventListener('load', attemptPlayMusic);

        // Her tÃ¼rlÃ¼ kullanÄ±cÄ± etkileÅŸiminde dene
        const events = ['click', 'touchstart', 'touchend', 'mousedown', 'keydown', 'scroll', 'mousemove'];
        events.forEach(event => {
            document.addEventListener(event, attemptPlayMusic, { once: true, passive: true });
        });

        // Periyodik olarak kontrol et (sayfa aÃ§Ä±k kaldÄ±ÄŸÄ± sÃ¼rece)
        const musicInterval = setInterval(() => {
            if (!musicStarted) {
                attemptPlayMusic();
            } else {
                clearInterval(musicInterval);
            }
        }, 1000);

        // Sayfa gÃ¶rÃ¼nÃ¼r olduÄŸunda dene
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                attemptPlayMusic();
            }
        });

        // Mobil iÃ§in ek event'ler
        window.addEventListener('focus', attemptPlayMusic);
        window.addEventListener('pageshow', attemptPlayMusic);
    </script>
    <!-- MÃœZÄ°K SÄ°STEMÄ° SONU -->
</body>
</html>